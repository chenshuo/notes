<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Shuo Chen" /><link rel="canonical" href="https://chenshuo.com/notes/kernel/profiles/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Profiles - Shuo Chen's Notes</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Profiles";
        var mkdocs_page_input_path = "kernel/profiles.md";
        var mkdocs_page_url = "/notes/kernel/profiles/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-4PL3B2ZGE8"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', "G-4PL3B2ZGE8");
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Shuo Chen's Notes
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../bugs/">Bugs</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Kernel</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../study/">Study</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../data-structures/">Data Structures</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../file-descriptor-table/">File Descriptor Table</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../epoll/">Epoll</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../callgraph/">Call Graphs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../reuseport/">SO_REUSEPRT</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Profiles</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#dd-ifdevzero-ofdevnull">dd if=/dev/zero of=/dev/null</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../changes/">Changes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../docs/">Docs</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Languages</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../lcc/">lcc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lua/">Lua</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mem/">Memory Model</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Miscs</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../git/">Git</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../ssl/">SSL</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../links/">Links</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Elec</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../dsp/">DSP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reed-solomon/">Reed-Solomon</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../UA78L05/">Î¼A78L05 Analysis and Simulation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../LM7805/">LM7805 Analysis and Simulation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tl431/">TL431 Analysis and Simulation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../XL741/">XL741/741SE Simulation and Experiments</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Shuo Chen's Notes</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Kernel</li>
      <li class="breadcrumb-item active">Profiles</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="kernel-profiles">Kernel profiles</h1>
<pre><code class="language-shell">z420$ lscpu
Architecture:                    x86_64
CPU op-mode(s):                  32-bit, 64-bit
Byte Order:                      Little Endian
Address sizes:                   46 bits physical, 48 bits virtual
CPU(s):                          8
On-line CPU(s) list:             0-7
Thread(s) per core:              2
Core(s) per socket:              4
Socket(s):                       1
NUMA node(s):                    1
Vendor ID:                       GenuineIntel
CPU family:                      6
Model:                           45
Model name:                      Intel(R) Xeon(R) CPU E5-1620 0 @ 3.60GHz
Stepping:                        7
CPU MHz:                         2393.980
CPU max MHz:                     3800.0000
CPU min MHz:                     1200.0000
BogoMIPS:                        7182.25
Virtualization:                  VT-x
L1d cache:                       128 KiB
L1i cache:                       128 KiB
L2 cache:                        1 MiB
L3 cache:                        10 MiB
NUMA node0 CPU(s):               0-7
Vulnerability Itlb multihit:     KVM: Mitigation: VMX disabled
Vulnerability L1tf:              Mitigation; PTE Inversion; VMX conditional cache flushes, SMT vulnerable
Vulnerability Mds:               Vulnerable: Clear CPU buffers attempted, no microcode; SMT vulnerable
Vulnerability Meltdown:          Mitigation; PTI
Vulnerability Spec store bypass: Vulnerable
Vulnerability Spectre v1:        Mitigation; usercopy/swapgs barriers and __user pointer sanitization
Vulnerability Spectre v2:        Mitigation; Full generic retpoline, STIBP disabled, RSB filling
Vulnerability Srbds:             Not affected
Vulnerability Tsx async abort:   Not affected
Flags:                           fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush
                                  dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_
                                 tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf
                                 pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm pcid d
                                 ca sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx lahf_lm epb pti
                                  tpr_shadow vnmi flexpriority ept vpid xsaveopt dtherm ida arat pln pts
</code></pre>
<h2 id="dd-ifdevzero-ofdevnull"><code>dd if=/dev/zero of=/dev/null</code></h2>
<p>Writing to <code>/dev/null</code> is a no-op, it doesn't even touch the buffer.
That is, even if you pass a NULL pointer to <code>write(2)</code>, e.g. <code>write(null_fd, NULL, 1048576)</code>,
it won't segfault.</p>
<pre><code class="language-c">// drivers/char/mem.c
static ssize_t write_null(struct file *file, const char __user *buf,
                          size_t count, loff_t *ppos)
{
        return count;
}
</code></pre>
<ul>
<li><a href="../profile-dd1b.html">profile</a> of <code>sudo perf record -g dd if=/dev/zero of=/dev/null bs=1 count=10M</code></li>
</ul>
<pre><code class="language-shell">$ sudo perf record -g -o bs1.data dd if=/dev/zero of=/dev/null bs=1 count=10M
10485760+0 records in
10485760+0 records out
10485760 bytes (10 MB, 10 MiB) copied, 5.82431 s, 1.8 MB/s
[ perf record: Woken up 9 times to write data ]
[ perf record: Captured and wrote 2.153 MB bs1.data (23322 samples) ]
</code></pre>
<p><a href="../ddbs1b10M.pb.gz">ddbs1b10M.pb.gz</a></p>
<ul>
<li><a href="../profile-dd128k.html">profile</a> of <code>sudo perf record -g dd if=/dev/zero of=/dev/null bs=128k count=1M</code></li>
</ul>
<pre><code class="language-shell">$ sudo perf record -g -o bs128k.data dd if=/dev/zero of=/dev/null bs=128k count=1M
1048576+0 records in
1048576+0 records out
137438953472 bytes (137 GB, 128 GiB) copied, 6.35848 s, 21.6 GB/s
[ perf record: Woken up 12 times to write data ]
[ perf record: Captured and wrote 3.052 MB bs128k.data (25460 samples) ]
</code></pre>
<p><a href="../ddbs128k1M.pb.gz">ddbs128k1M.pb.gz</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../reuseport/" class="btn btn-neutral float-left" title="SO_REUSEPRT"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../changes/" class="btn btn-neutral float-right" title="Changes">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/chenshuo/notes" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../reuseport/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../changes/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
